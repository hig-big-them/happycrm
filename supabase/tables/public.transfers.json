{
  "table_schema": "public",
  "table_name": "transfers",
  "columns": [
    {
      "column_name": "notes",
      "data_type": "text",
      "is_nullable": "YES",
      "column_default": null,
      "constraints": null
    },
    {
      "column_name": "id",
      "data_type": "uuid",
      "is_nullable": "NO",
      "column_default": "gen_random_uuid()",
      "constraints": [
        "transfers_pkey"
      ]
    },
    {
      "column_name": "title",
      "data_type": "text",
      "is_nullable": "NO",
      "column_default": null,
      "constraints": null
    },
    {
      "column_name": "details",
      "data_type": "text",
      "is_nullable": "YES",
      "column_default": null,
      "constraints": null
    },
    {
      "column_name": "created_at",
      "data_type": "timestamp with time zone",
      "is_nullable": "NO",
      "column_default": "now()",
      "constraints": null
    },
    {
      "column_name": "updated_at",
      "data_type": "timestamp with time zone",
      "is_nullable": "NO",
      "column_default": "now()",
      "constraints": null
    },
    {
      "column_name": "deadline",
      "data_type": "timestamp with time zone",
      "is_nullable": "YES",
      "column_default": null,
      "constraints": null
    },
    {
      "column_name": "status",
      "data_type": "USER-DEFINED",
      "is_nullable": "NO",
      "column_default": "'pending'::transfer_status",
      "constraints": null
    },
    {
      "column_name": "assigned_agency_id",
      "data_type": "uuid",
      "is_nullable": "YES",
      "column_default": null,
      "constraints": null
    },
    {
      "column_name": "assigned_officer_id",
      "data_type": "uuid",
      "is_nullable": "YES",
      "column_default": null,
      "constraints": null
    },
    {
      "column_name": "created_by_user_id",
      "data_type": "uuid",
      "is_nullable": "YES",
      "column_default": null,
      "constraints": null
    },
    {
      "column_name": "priority",
      "data_type": "integer",
      "is_nullable": "YES",
      "column_default": "0",
      "constraints": null
    },
    {
      "column_name": "location_from_id",
      "data_type": "uuid",
      "is_nullable": "YES",
      "column_default": null,
      "constraints": null
    },
    {
      "column_name": "location_to_id",
      "data_type": "uuid",
      "is_nullable": "YES",
      "column_default": null,
      "constraints": null
    },
    {
      "column_name": "related_route_id",
      "data_type": "uuid",
      "is_nullable": "YES",
      "column_default": null,
      "constraints": null
    }
  ],
  "foreign_keys": [
    {
      "constraint_name": "transfers_assigned_agency_id_fkey",
      "column_name": "assigned_agency_id",
      "referenced_table": "agencies",
      "referenced_column": "id"
    },
    {
      "constraint_name": "transfers_location_from_id_fkey",
      "column_name": "location_from_id",
      "referenced_table": "locations",
      "referenced_column": "id"
    },
    {
      "constraint_name": "transfers_location_to_id_fkey",
      "column_name": "location_to_id",
      "referenced_table": "locations",
      "referenced_column": "id"
    },
    {
      "constraint_name": "transfers_related_route_id_fkey",
      "column_name": "related_route_id",
      "referenced_table": "routes",
      "referenced_column": "id"
    }
  ],
  "rls_policies": [
    {
      "policy_name": "Allow assigned users and agency members to select transfers",
      "command": "r",
      "roles": [
        "0"
      ],
      "using_clause": "{BOOLEXPR :boolop or :args ({OPEXPR :opno 2972 :opfuncid 2956 :opresulttype 16 :opretset false :opcollid 0 :inputcollid 0 :args ({FUNCEXPR :funcid 17593 :funcresulttype 2950 :funcretset false :funcvariadic false :funcformat 0 :funccollid 0 :inputcollid 0 :args <> :location 190} {VAR :varno 1 :varattno 9 :vartype 2950 :vartypmod -1 :varcollid 0 :varlevelsup 0 :varnosyn 1 :varattnosyn 9 :location 203}) :location 201} {SUBLINK :subLinkType 0 :subLinkId 0 :testexpr <> :operName <> :subselect {QUERY :commandType 1 :querySource 0 :canSetTag true :utilityStmt <> :resultRelation 0 :hasAggs false :hasWindowFuncs false :hasTargetSRFs false :hasSubLinks false :hasDistinctOn false :hasRecursive false :hasModifyingCTE false :hasForUpdate false :hasRowSecurity false :isReturn false :cteList <> :rtable ({RANGETBLENTRY :alias {ALIAS :aliasname au :colnames <>} :eref {ALIAS :aliasname au :colnames (\"agency_id\" \"user_id\" \"role\" \"created_at\")} :rtekind 0 :relid 25594 :relkind r :rellockmode 1 :tablesample <> :lateral false :inh true :inFromCl true :requiredPerms 2 :checkAsUser 0 :selectedCols (b 8 9) :insertedCols (b) :updatedCols (b) :extraUpdatedCols (b) :securityQuals <>}) :jointree {FROMEXPR :fromlist ({RANGETBLREF :rtindex 1}) :quals {BOOLEXPR :boolop and :args ({OPEXPR :opno 2972 :opfuncid 2956 :opresulttype 16 :opretset false :opcollid 0 :inputcollid 0 :args ({VAR :varno 1 :varattno 1 :vartype 2950 :vartypmod -1 :varcollid 0 :varlevelsup 0 :varnosyn 1 :varattnosyn 1 :location 298} {VAR :varno 1 :varattno 8 :vartype 2950 :vartypmod -1 :varcollid 0 :varlevelsup 1 :varnosyn 1 :varattnosyn 8 :location 313}) :location 311} {OPEXPR :opno 2972 :opfuncid 2956 :opresulttype 16 :opretset false :opcollid 0 :inputcollid 0 :args ({VAR :varno 1 :varattno 2 :vartype 2950 :vartypmod -1 :varcollid 0 :varlevelsup 0 :varnosyn 1 :varattnosyn 2 :location 346} {FUNCEXPR :funcid 17593 :funcresulttype 2950 :funcretset false :funcvariadic false :funcformat 0 :funccollid 0 :inputcollid 0 :args <> :location 359}) :location 357}) :location 342}} :targetList ({TARGETENTRY :expr {CONST :consttype 23 :consttypmod -1 :constcollid 0 :constlen 4 :constbyval true :constisnull false :location 252 :constvalue 4 [ 1 0 0 0 0 0 0 0 ]} :resno 1 :resname ?column? :ressortgroupref 0 :resorigtbl 0 :resorigcol 0 :resjunk false}) :override 0 :onConflict <> :returningList <> :groupClause <> :groupDistinct false :groupingSets <> :havingQual <> :windowClause <> :distinctClause <> :sortClause <> :limitOffset <> :limitCount <> :limitOption 0 :rowMarks <> :setOperations <> :constraintDeps <> :withCheckOptions <> :mergeActionList <> :mergeUseOuterJoin false :stmt_location 0 :stmt_len 0} :location 231} {OPEXPR :opno 98 :opfuncid 67 :opresulttype 16 :opretset false :opcollid 0 :inputcollid 100 :args ({OPEXPR :opno 3477 :opfuncid 3214 :opresulttype 25 :opretset false :opcollid 100 :inputcollid 100 :args ({COERCEVIAIO :arg {OPEXPR :opno 3477 :opfuncid 3214 :opresulttype 25 :opretset false :opcollid 100 :inputcollid 100 :args ({FUNCEXPR :funcid 17591 :funcresulttype 3802 :funcretset false :funcvariadic false :funcformat 0 :funccollid 0 :inputcollid 0 :args <> :location 385} {CONST :consttype 25 :consttypmod -1 :constcollid 100 :constlen -1 :constbyval false :constisnull false :location 398 :constvalue 21 [ 84 0 0 0 114 97 119 95 97 112 112 95 109 101 116 97 95 100 97 116 97 ]}) :location 395} :resulttype 3802 :resultcollid 0 :coerceformat 1 :location 418} {CONST :consttype 25 :consttypmod -1 :constcollid 100 :constlen -1 :constbyval false :constisnull false :location 428 :constvalue 12 [ 48 0 0 0 97 112 112 95 114 111 108 101 ]}) :location 425} {CONST :consttype 25 :consttypmod -1 :constcollid 100 :constlen -1 :constbyval false :constisnull false :location 442 :constvalue 13 [ 52 0 0 0 115 117 112 101 114 117 115 101 114 ]}) :location 440}) :location 224}",
      "with_check_clause": null
    },
    {
      "policy_name": "Allow assigned officer or agency admin to update transfers",
      "command": "w",
      "roles": [
        "0"
      ],
      "using_clause": "{BOOLEXPR :boolop or :args ({OPEXPR :opno 2972 :opfuncid 2956 :opresulttype 16 :opretset false :opcollid 0 :inputcollid 0 :args ({FUNCEXPR :funcid 17593 :funcresulttype 2950 :funcretset false :funcvariadic false :funcformat 0 :funccollid 0 :inputcollid 0 :args <> :location 192} {VAR :varno 1 :varattno 9 :vartype 2950 :vartypmod -1 :varcollid 0 :varlevelsup 0 :varnosyn 1 :varattnosyn 9 :location 205}) :location 203} {SUBLINK :subLinkType 0 :subLinkId 0 :testexpr <> :operName <> :subselect {QUERY :commandType 1 :querySource 0 :canSetTag true :utilityStmt <> :resultRelation 0 :hasAggs false :hasWindowFuncs false :hasTargetSRFs false :hasSubLinks false :hasDistinctOn false :hasRecursive false :hasModifyingCTE false :hasForUpdate false :hasRowSecurity false :isReturn false :cteList <> :rtable ({RANGETBLENTRY :alias {ALIAS :aliasname au :colnames <>} :eref {ALIAS :aliasname au :colnames (\"agency_id\" \"user_id\" \"role\" \"created_at\")} :rtekind 0 :relid 25594 :relkind r :rellockmode 1 :tablesample <> :lateral false :inh true :inFromCl true :requiredPerms 2 :checkAsUser 0 :selectedCols (b 8 9 10) :insertedCols (b) :updatedCols (b) :extraUpdatedCols (b) :securityQuals <>}) :jointree {FROMEXPR :fromlist ({RANGETBLREF :rtindex 1}) :quals {BOOLEXPR :boolop and :args ({OPEXPR :opno 2972 :opfuncid 2956 :opresulttype 16 :opretset false :opcollid 0 :inputcollid 0 :args ({VAR :varno 1 :varattno 1 :vartype 2950 :vartypmod -1 :varcollid 0 :varlevelsup 0 :varnosyn 1 :varattnosyn 1 :location 300} {VAR :varno 1 :varattno 8 :vartype 2950 :vartypmod -1 :varcollid 0 :varlevelsup 1 :varnosyn 1 :varattnosyn 8 :location 315}) :location 313} {OPEXPR :opno 2972 :opfuncid 2956 :opresulttype 16 :opretset false :opcollid 0 :inputcollid 0 :args ({VAR :varno 1 :varattno 2 :vartype 2950 :vartypmod -1 :varcollid 0 :varlevelsup 0 :varnosyn 1 :varattnosyn 2 :location 348} {FUNCEXPR :funcid 17593 :funcresulttype 2950 :funcretset false :funcvariadic false :funcformat 0 :funccollid 0 :inputcollid 0 :args <> :location 361}) :location 359} {OPEXPR :opno 3516 :opfuncid 3508 :opresulttype 16 :opretset false :opcollid 0 :inputcollid 0 :args ({VAR :varno 1 :varattno 3 :vartype 25822 :vartypmod -1 :varcollid 0 :varlevelsup 0 :varnosyn 1 :varattnosyn 3 :location 376} {CONST :consttype 25822 :consttypmod -1 :constcollid 0 :constlen 4 :constbyval true :constisnull false :location 386 :constvalue 4 [ 224 100 0 0 0 0 0 0 ]}) :location 384}) :location 344}} :targetList ({TARGETENTRY :expr {CONST :consttype 23 :consttypmod -1 :constcollid 0 :constlen 4 :constbyval true :constisnull false :location 254 :constvalue 4 [ 1 0 0 0 0 0 0 0 ]} :resno 1 :resname ?column? :ressortgroupref 0 :resorigtbl 0 :resorigcol 0 :resjunk false}) :override 0 :onConflict <> :returningList <> :groupClause <> :groupDistinct false :groupingSets <> :havingQual <> :windowClause <> :distinctClause <> :sortClause <> :limitOffset <> :limitCount <> :limitOption 0 :rowMarks <> :setOperations <> :constraintDeps <> :withCheckOptions <> :mergeActionList <> :mergeUseOuterJoin false :stmt_location 0 :stmt_len 0} :location 233} {OPEXPR :opno 98 :opfuncid 67 :opresulttype 16 :opretset false :opcollid 0 :inputcollid 100 :args ({OPEXPR :opno 3477 :opfuncid 3214 :opresulttype 25 :opretset false :opcollid 100 :inputcollid 100 :args ({COERCEVIAIO :arg {OPEXPR :opno 3477 :opfuncid 3214 :opresulttype 25 :opretset false :opcollid 100 :inputcollid 100 :args ({FUNCEXPR :funcid 17591 :funcresulttype 3802 :funcretset false :funcvariadic false :funcformat 0 :funccollid 0 :inputcollid 0 :args <> :location 436} {CONST :consttype 25 :consttypmod -1 :constcollid 100 :constlen -1 :constbyval false :constisnull false :location 449 :constvalue 21 [ 84 0 0 0 114 97 119 95 97 112 112 95 109 101 116 97 95 100 97 116 97 ]}) :location 446} :resulttype 3802 :resultcollid 0 :coerceformat 1 :location 469} {CONST :consttype 25 :consttypmod -1 :constcollid 100 :constlen -1 :constbyval false :constisnull false :location 479 :constvalue 12 [ 48 0 0 0 97 112 112 95 114 111 108 101 ]}) :location 476} {CONST :consttype 25 :consttypmod -1 :constcollid 100 :constlen -1 :constbyval false :constisnull false :location 493 :constvalue 13 [ 52 0 0 0 115 117 112 101 114 117 115 101 114 ]}) :location 491}) :location 226}",
      "with_check_clause": "{BOOLEXPR :boolop or :args ({OPEXPR :opno 2972 :opfuncid 2956 :opresulttype 16 :opretset false :opcollid 0 :inputcollid 0 :args ({FUNCEXPR :funcid 17593 :funcresulttype 2950 :funcretset false :funcvariadic false :funcformat 0 :funccollid 0 :inputcollid 0 :args <> :location 527} {VAR :varno 1 :varattno 9 :vartype 2950 :vartypmod -1 :varcollid 0 :varlevelsup 0 :varnosyn 1 :varattnosyn 9 :location 540}) :location 538} {SUBLINK :subLinkType 0 :subLinkId 0 :testexpr <> :operName <> :subselect {QUERY :commandType 1 :querySource 0 :canSetTag true :utilityStmt <> :resultRelation 0 :hasAggs false :hasWindowFuncs false :hasTargetSRFs false :hasSubLinks false :hasDistinctOn false :hasRecursive false :hasModifyingCTE false :hasForUpdate false :hasRowSecurity false :isReturn false :cteList <> :rtable ({RANGETBLENTRY :alias {ALIAS :aliasname au :colnames <>} :eref {ALIAS :aliasname au :colnames (\"agency_id\" \"user_id\" \"role\" \"created_at\")} :rtekind 0 :relid 25594 :relkind r :rellockmode 1 :tablesample <> :lateral false :inh true :inFromCl true :requiredPerms 2 :checkAsUser 0 :selectedCols (b 8 9 10) :insertedCols (b) :updatedCols (b) :extraUpdatedCols (b) :securityQuals <>}) :jointree {FROMEXPR :fromlist ({RANGETBLREF :rtindex 1}) :quals {BOOLEXPR :boolop and :args ({OPEXPR :opno 2972 :opfuncid 2956 :opresulttype 16 :opretset false :opcollid 0 :inputcollid 0 :args ({VAR :varno 1 :varattno 1 :vartype 2950 :vartypmod -1 :varcollid 0 :varlevelsup 0 :varnosyn 1 :varattnosyn 1 :location 635} {VAR :varno 1 :varattno 8 :vartype 2950 :vartypmod -1 :varcollid 0 :varlevelsup 1 :varnosyn 1 :varattnosyn 8 :location 650}) :location 648} {OPEXPR :opno 2972 :opfuncid 2956 :opresulttype 16 :opretset false :opcollid 0 :inputcollid 0 :args ({VAR :varno 1 :varattno 2 :vartype 2950 :vartypmod -1 :varcollid 0 :varlevelsup 0 :varnosyn 1 :varattnosyn 2 :location 683} {FUNCEXPR :funcid 17593 :funcresulttype 2950 :funcretset false :funcvariadic false :funcformat 0 :funccollid 0 :inputcollid 0 :args <> :location 696}) :location 694} {OPEXPR :opno 3516 :opfuncid 3508 :opresulttype 16 :opretset false :opcollid 0 :inputcollid 0 :args ({VAR :varno 1 :varattno 3 :vartype 25822 :vartypmod -1 :varcollid 0 :varlevelsup 0 :varnosyn 1 :varattnosyn 3 :location 711} {CONST :consttype 25822 :consttypmod -1 :constcollid 0 :constlen 4 :constbyval true :constisnull false :location 721 :constvalue 4 [ 224 100 0 0 0 0 0 0 ]}) :location 719}) :location 679}} :targetList ({TARGETENTRY :expr {CONST :consttype 23 :consttypmod -1 :constcollid 0 :constlen 4 :constbyval true :constisnull false :location 589 :constvalue 4 [ 1 0 0 0 0 0 0 0 ]} :resno 1 :resname ?column? :ressortgroupref 0 :resorigtbl 0 :resorigcol 0 :resjunk false}) :override 0 :onConflict <> :returningList <> :groupClause <> :groupDistinct false :groupingSets <> :havingQual <> :windowClause <> :distinctClause <> :sortClause <> :limitOffset <> :limitCount <> :limitOption 0 :rowMarks <> :setOperations <> :constraintDeps <> :withCheckOptions <> :mergeActionList <> :mergeUseOuterJoin false :stmt_location 0 :stmt_len 0} :location 568} {OPEXPR :opno 98 :opfuncid 67 :opresulttype 16 :opretset false :opcollid 0 :inputcollid 100 :args ({OPEXPR :opno 3477 :opfuncid 3214 :opresulttype 25 :opretset false :opcollid 100 :inputcollid 100 :args ({COERCEVIAIO :arg {OPEXPR :opno 3477 :opfuncid 3214 :opresulttype 25 :opretset false :opcollid 100 :inputcollid 100 :args ({FUNCEXPR :funcid 17591 :funcresulttype 3802 :funcretset false :funcvariadic false :funcformat 0 :funccollid 0 :inputcollid 0 :args <> :location 771} {CONST :consttype 25 :consttypmod -1 :constcollid 100 :constlen -1 :constbyval false :constisnull false :location 784 :constvalue 21 [ 84 0 0 0 114 97 119 95 97 112 112 95 109 101 116 97 95 100 97 116 97 ]}) :location 781} :resulttype 3802 :resultcollid 0 :coerceformat 1 :location 804} {CONST :consttype 25 :consttypmod -1 :constcollid 100 :constlen -1 :constbyval false :constisnull false :location 814 :constvalue 12 [ 48 0 0 0 97 112 112 95 114 111 108 101 ]}) :location 811} {CONST :consttype 25 :consttypmod -1 :constcollid 100 :constlen -1 :constbyval false :constisnull false :location 828 :constvalue 13 [ 52 0 0 0 115 117 112 101 114 117 115 101 114 ]}) :location 826}) :location 561}"
    },
    {
      "policy_name": "Allow agency admins to create transfers for their agency",
      "command": "a",
      "roles": [
        "0"
      ],
      "using_clause": null,
      "with_check_clause": "{BOOLEXPR :boolop or :args ({OPEXPR :opno 98 :opfuncid 67 :opresulttype 16 :opretset false :opcollid 0 :inputcollid 100 :args ({OPEXPR :opno 3477 :opfuncid 3214 :opresulttype 25 :opretset false :opcollid 100 :inputcollid 100 :args ({COERCEVIAIO :arg {OPEXPR :opno 3477 :opfuncid 3214 :opresulttype 25 :opretset false :opcollid 100 :inputcollid 100 :args ({FUNCEXPR :funcid 17591 :funcresulttype 3802 :funcretset false :funcvariadic false :funcformat 0 :funccollid 0 :inputcollid 0 :args <> :location 220} {CONST :consttype 25 :consttypmod -1 :constcollid 100 :constlen -1 :constbyval false :constisnull false :location 233 :constvalue 21 [ 84 0 0 0 114 97 119 95 97 112 112 95 109 101 116 97 95 100 97 116 97 ]}) :location 230} :resulttype 3802 :resultcollid 0 :coerceformat 1 :location 253} {CONST :consttype 25 :consttypmod -1 :constcollid 100 :constlen -1 :constbyval false :constisnull false :location 263 :constvalue 12 [ 48 0 0 0 97 112 112 95 114 111 108 101 ]}) :location 260} {CONST :consttype 25 :consttypmod -1 :constcollid 100 :constlen -1 :constbyval false :constisnull false :location 277 :constvalue 13 [ 52 0 0 0 115 117 112 101 114 117 115 101 114 ]}) :location 275} {BOOLEXPR :boolop and :args ({OPEXPR :opno 98 :opfuncid 67 :opresulttype 16 :opretset false :opcollid 0 :inputcollid 100 :args ({OPEXPR :opno 3477 :opfuncid 3214 :opresulttype 25 :opretset false :opcollid 100 :inputcollid 100 :args ({COERCEVIAIO :arg {OPEXPR :opno 3477 :opfuncid 3214 :opresulttype 25 :opretset false :opcollid 100 :inputcollid 100 :args ({FUNCEXPR :funcid 17591 :funcresulttype 3802 :funcretset false :funcvariadic false :funcformat 0 :funccollid 0 :inputcollid 0 :args <> :location 396} {CONST :consttype 25 :consttypmod -1 :constcollid 100 :constlen -1 :constbyval false :constisnull false :location 409 :constvalue 21 [ 84 0 0 0 114 97 119 95 97 112 112 95 109 101 116 97 95 100 97 116 97 ]}) :location 406} :resulttype 3802 :resultcollid 0 :coerceformat 1 :location 429} {CONST :consttype 25 :consttypmod -1 :constcollid 100 :constlen -1 :constbyval false :constisnull false :location 439 :constvalue 12 [ 48 0 0 0 97 112 112 95 114 111 108 101 ]}) :location 436} {CONST :consttype 25 :consttypmod -1 :constcollid 100 :constlen -1 :constbyval false :constisnull false :location 453 :constvalue 9 [ 36 0 0 0 97 100 109 105 110 ]}) :location 451} {FUNCEXPR :funcid 25625 :funcresulttype 16 :funcretset false :funcvariadic false :funcformat 0 :funccollid 0 :inputcollid 0 :args ({FUNCEXPR :funcid 17593 :funcresulttype 2950 :funcretset false :funcvariadic false :funcformat 0 :funccollid 0 :inputcollid 0 :args <> :location 524} {VAR :varno 1 :varattno 8 :vartype 2950 :vartypmod -1 :varcollid 0 :varlevelsup 0 :varnosyn 1 :varattnosyn 8 :location 536}) :location 474}) :location 461}) :location 296}"
    }
  ],
  "auth_references": []
}